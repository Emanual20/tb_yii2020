;(function($,window,document,undefined){"use strict";$.ui.fancytree.registerExtension({name:"columnview",version:"0.0.1",options:{},treeInit:function(ctx){var $tdFirst,$ul,tree=ctx.tree,$table=tree.widget.element;tree.tr=$("tbody tr",$table)[0];tree.columnCount=$(">td",tree.tr).length;this._super(ctx);$ul=$(tree.rootNode.ul);$tdFirst=$(">td",tree.tr).eq(0);$ul.removeClass("fancytree-container");$ul.removeAttr("tabindex");tree.$container=$table;$table.addClass("fancytree-container fancytree-ext-columnview");$table.attr("tabindex","0");$tdFirst.empty();$ul.detach().appendTo($tdFirst);tree.widget.options.autoCollapse=true;tree.widget.options.fx=false;tree.widget.options.clickFolderMode=1;$table.bind("fancytreeactivate",function(event,data){var i,tdList,node=data.node,tree=data.tree,level=node.getLevel();tree._callHook("nodeCollapseSiblings",node);if(level<=tree.columnCount){tdList=$(">td",tree.tr);for(i=level;i<tree.columnCount;i++){tdList.eq(i).empty();}}
if(!node.expanded&&(node.children||node.lazy)){node.setExpanded();}}).bind("fancytreekeydown",function(event,data){var next=null;switch(event.which){case $.ui.keyCode.DOWN:next=data.node.getNextSibling();if(next){next.setFocus();}
return false;case $.ui.keyCode.LEFT:next=data.node.getParent();if(next){next.setFocus();}
return false;case $.ui.keyCode.UP:next=data.node.getPrevSibling();if(next){next.setFocus();}
return false;}});},nodeRender:function(ctx,force,deep,collapsed,_recursive){this._super(ctx,force,deep,collapsed,_recursive);var level,$tdChild,$ul,tree=ctx.tree,node=ctx.node,$span=$(node.span);$span.find("span.fancytree-expander").remove();if(node.hasChildren()!==false&&!$span.find("span.fancytree-cv-right").length){$span.append($("<span class='fancytree-icon fancytree-cv-right'>"));}
if(node.ul){node.ul.style.display="";level=node.getLevel();if(level<tree.columnCount){$tdChild=$(">td",tree.tr).eq(level);$ul=$(node.ul).detach();$tdChild.empty().append($ul);}}}});}(jQuery,window,document));